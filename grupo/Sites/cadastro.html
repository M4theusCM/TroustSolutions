<!DOCTYPE html>
<html lang="pt-br">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Cadastro</title>
    <link rel="icon" type="image/x-icon" href="./src/Logo-icon.png">
    <link rel="stylesheet" href="./css/acessos.css">
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Chewy&family=Poppins:ital,wght@0,100;0,200;0,300;0,400;0,500;0,600;0,700;0,800;0,900;1,100;1,200;1,300;1,400;1,500;1,600;1,700;1,800;1,900&display=swap');

        body {
            font-family: "Poppins", sans-serif;
        }
    </style>
</head>

<body>
    <div id="cad_1" class="container">
        <div class="container-img">
            <img src="./src/homem-tabelas.svg" alt="img bonitinha">
        </div>
        <div class="container-forms">
            <div class="topo-cad">
                <div class="topo">
                    <h1>Cadastre-se</h1>
                    <img class="logo" src="./src/Logo-icon.png" alt="TroustSolutions">
                </div>
                <div class="sub-topo">
                    <h2>Empresa</h2>
                    <div class="progresso">
                        <div class="bolinha ativo"></div>
                        <div class="linha"></div>
                        <div class="bolinha"></div>
                        <!-- <div class="linha"></div>
                        <div class="bolinha"></div> -->
                    </div>
                </div>
            </div>
            <div class="div-forms-cad">
                <div class="msg-erros" id="div_msg_erros"> <!--erros aqui--> </div>
                <div class="linha-input">
                    <label class="w-60">
                        <span>Nome Fantasia:</span>
                        <input type="text" id="ipt_nome_fantasia" placeholder="Ex: TroustSolutions">
                    </label>
                    <label class="w-40">
                        <span>CNPJ:</span>
                        <input type="text" id="ipt_cnpj" placeholder="Ex: 00.000.000/0000-00" maxlength="18"
                            onkeyup="formatarCnpj()">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-100">
                        <span>Razão Social:</span>
                        <input type="text" id="ipt_razao_social"
                            placeholder="Troust Solutions Desenvolvimento e Inovação Ltda">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-50">
                        <span>Telefone Fixo:</span>
                        <input id="ipt_telefone" placeholder="(11) 8255-1524" maxlength="14" onkeyup="formatarTellFixo()">
                    </label>
                    <label class="w-50">
                        <span>Telefone Celular:</span>
                        <input id="ipt_telefone_2" placeholder="(11) 98255-1524" maxlength="15" onkeyup="formatarTellCell()">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-33">
                        <span>CEP:</span>
                        <input type="text" id="ipt_cep" placeholder="02612-190" maxlength="9" onkeyup="formatarCep()">
                    </label>
                    <label class="w-33">
                        <span>Número:</span>
                        <input type="text" id="ipt_numero_ende" placeholder="598A">
                    </label>
                    <label class="w-33">
                        <span>Complemento:</span>
                        <input type="text" id="ipt_complemento" placeholder="Apto. 1">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-50">
                        <span>Rua:</span>
                        <input type="text" id="ipt_rua" placeholder="Rua Joaquim Alves Torres">
                    </label>
                    <label class="w-50">
                        <span>Bairro:</span>
                        <input type="text" id="ipt_bairro" placeholder="Vila Nova Cachoeirinha">
                    </label>
                </div>
            </div>
            <div class="outros-links">
                <div class="container-btn">
                    <button onclick="avancar_p1()" class="btn-etapa">Próximo</button>
                </div>
                <p><a href="./login.html">Já possui uma conta? <span>Faça Login</span></a></p>
            </div>
        </div>
    </div>
    <div id="cad_2" class="container">
        <div class="container-img">
            <img src="./src/homem-quadro-branco.svg" alt="img bonitinha">
        </div>
        <div class="container-forms">
            <div class="topo-cad">
                <div class="topo">
                    <h1>Cadastre-se</h1>
                    <img class="logo" src="./src/Logo-icon.png" alt="TroustSolutions">
                </div>
                <div class="sub-topo">
                    <h2>Supervisor</h2>
                    <div class="progresso">
                        <div class="bolinha ativo"></div>
                        <div class="linha ativo"></div>
                        <div class="bolinha ativo"></div>
                        <!-- <div class="linha"></div>
                        <div class="bolinha"></div> -->
                    </div>
                </div>
            </div>
            <div class="div-forms-cad">
                <div class="msg-erros" id="div_msg_erros_2"> <!--erros aqui--> </div>
                <div class="linha-input">
                    <label class="w-40">
                        <span>Nome:</span>
                        <input type="text" id="ipt_nome_supervisor" placeholder="Ex: Matheus">
                    </label>
                    <label class="w-60">
                        <span>Sobrenome:</span>
                        <input type="text" id="ipt_sobrenome" placeholder="Ex: Silva">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-100">
                        <span>Email:</span>
                        <input type="text" id="ipt_email" placeholder="supervisor@troustsolutions.com">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-100">
                        <span>Senha:</span>
                        <input type="password" id="ipt_senha" placeholder="S3nh4_fort*" onkeyup="Validar_forca_senha()">
                        <div class="barra-senha" id="div_forca_senha">
                            <div class="forca"><span id="span_forca_senha">Insegura</span></div>
                            <div class="barra-forca-senha">
                                <div class="barra barra-1" id="div_barra_0"></div>
                                <div class="barra" id="div_barra_1"></div>
                                <div class="barra" id="div_barra_2"></div>
                                <div class="barra" id="div_barra_3"></div>
                                <div class="barra" id="div_barra_4"></div>
                                <!-- <div class="barra" id="div_barra_4"></div> -->
                            </div>
                        </div>
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-100">
                        <span>Confirme sua Senha:</span>
                        <input type="password" id="ipt_confirme_senha" placeholder="">
                    </label>
                </div>
            </div>
            <div class="outros-links">
                <div class="container-btn">
                    <button onclick="voltar_p1()" class="btn-etapa">Voltar</button>
                    <button onclick="avancar_p2()" class="btn-cadastrar">Cadastrar</button>
                </div>
                <p><a href="./login.html">Já possui uma conta? <span>Faça Login</span></a></p>
            </div>
        </div>
    </div>

    <!-- <div id="cad_3" class="container">
        <div class="container-img">
            <img src="./src/mulher-aquario.svg" alt="img bonitinha">
        </div>
        <div class="container-forms">
            <div class="topo-cad">
                <div class="topo">
                    <h1>Cadastre-se</h1>
                    <img class="logo" src="./src/Logo-icon.png" alt="TroustSolutions">
                </div>
                <div class="sub-topo">
                    <h2>Tanque</h2>
                    <div class="progresso">
                        <div class="bolinha ativo"></div>
                        <div class="linha ativo"></div>
                        <div class="bolinha ativo"></div>
                        <div class="linha ativo"></div>
                        <div class="bolinha ativo"></div>
                    </div>
                </div>
            </div>
            <div class="div-forms-cad">
                <div class="linha-input">
                    <label class="w-60">
                        <span>Nome:</span>
                        <input type="text" id="ipt_nome_tanque" placeholder="Ex: Tanque 1A">
                    </label>
                    <label class="w-40">
                        <span>Quantidade de sensores:</span>
                        <input type="text" id="ipt_qtd_sensore" placeholder="Ex: 5">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-33">
                        <span>Temperatura Máxima:</span>
                        <input type="text" id="inp_temp_max" placeholder="25°C">
                    </label>
                    <label class="w-33">
                        <span>Temperatura Minima:</span>
                        <input type="text" id="inp_temp_min" placeholder="08°C">
                    </label>
                    <label class="w-33">
                        <span>Sensor:</span>
                        <select id="slc_sensor">
                            <option value="lm35" selected>LM35</option>
                            <option value="dht11">DHT11</option>
                            <option value="ds18b20">DS18B20</option>
                        </select>
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-40">
                        <span>CEP:</span>
                        <input type="text" id="ipt_cep_tanque" placeholder="">
                    </label>
                    <label class="w-25">
                        <span>Número:</span>
                        <input type="text" id="ipt_num_tanque" placeholder="">
                    </label>
                    <label class="w-40">
                        <span>Complemento:</span>
                        <input type="text" id="ipt_complemento_tanque" placeholder="">
                    </label>
                </div>
                <div class="linha-input">
                    <label class="w-50">
                        <span>Rua:</span>
                        <input type="password" id="inp_rua_tanque" placeholder="">
                    </label>
                    <label class="w-50">
                        <span>Bairro:</span>
                        <input type="password" id="inp_bairro_tanque" placeholder="">
                    </label>
                </div>
            </div>
            <div class="outros-links">
                <div class="container-btn">
                    <button onclick="voltar_p2()" class="btn-etapa">Voltar</button>
                    <button onclick="cadastrar()" class="btn-cadastrar">cadastrar</button>
                </div>
                <p><a href="./login.html">Já possui uma conta? <span>Faça Login</span></a></p>
            </div>
        </div>
    </div> -->

</body>
<script>
    /* Parte 1*/
    var nomeFantasiaEmpresa = ''
    var cnpjEmpresa = ''
    var razaoSocialEmpresa = ''
    var tellFixoEmpresa = ''
    var tellCellEmpresa = ''
    var cepEmpresa = ''
    var numEndeEmpresa = ''
    var compEndeEmpresa = ''
    var ruaEndeEmpresa = ''
    var bairoEndeEmpresa = ''

    /* Parte 2*/
    var nomeCompletoFunc = ''
    var emailFunc = ''
    var senhaFunc = ''

    var forcaSenha = ''

    function avancar_p1() {
        nomeFantasiaEmpresa = ipt_nome_fantasia.value
        cnpjEmpresa = ipt_cnpj.value
        razaoSocialEmpresa = ipt_razao_social.value
        tellFixoEmpresa = ipt_telefone.value
        tellCellEmpresa = ipt_telefone_2.value
        cepEmpresa = ipt_cep.value
        numEndeEmpresa = ipt_numero_ende.value
        compEndeEmpresa = ipt_complemento.value
        ruaEndeEmpresa = ipt_rua.value
        bairoEndeEmpresa = ipt_bairro.value

        // tirando formatação
        cnpjEmpresa = cnpjEmpresa.replaceAll('.', '').replaceAll('/', '').replace('-', '')
        tellFixoEmpresa = tellFixoEmpresa.replace('(', '').replace(')', '').replace(' ', '').replace('-', '')
        tellCellEmpresa = tellCellEmpresa.replace('(', '').replace(')', '').replace(' ', '').replace('-', '')
        cepEmpresa = cepEmpresa.replace('-', '')

        var msg = ''
        if ( /*Campo Vazio*/
            nomeFantasiaEmpresa == '' ||
            razaoSocialEmpresa == '' ||
            cnpjEmpresa == '' ||
            tellFixoEmpresa == '' ||
            tellCellEmpresa == '' ||
            cepEmpresa == '' ||
            numEndeEmpresa == '' ||
            // compEndeEmpresa == '' || //Desejavel mas não obrigatorio//
            ruaEndeEmpresa == '' ||
            bairoEndeEmpresa == ''
        ) {
            msg = 'Preencha todos os campos'
            // cad_1.style.display = 'none';
            // cad_2.style.display = 'flex';

        } else if (cnpjEmpresa.length != 14) {
            msg = 'CNPJ inválido'
        } else if (tellCellEmpresa.length != 11 || tellFixoEmpresa.length != 10) {
            msg = 'Telefones invalidos'
        } else if (cepEmpresa.length != 8) {
            msg = 'CEP inválido'
        } else {
            cad_1.style.display = 'none';
            cad_2.style.display = 'flex';
        }
        div_msg_erros.style.display = 'block'
        div_msg_erros.innerHTML = msg
    }

    function avancar_p2() {
        var nomeFunc = ipt_nome_supervisor.value
        var sobrenomeFunc = ipt_sobrenome.value
        emailFunc = ipt_email.value
        var senhaProvisoriaFunc = ipt_senha.value
        var confirmarSenhaFunc = ipt_confirme_senha.value
        var msg = ''

        if (
            nomeFunc == '' ||
            sobrenomeFunc == '' ||
            emailFunc == '' ||
            senhaProvisoriaFunc == '' ||
            confirmarSenhaFunc == ''
        ) {
            msg = 'Preencha todos os campos'
        } else if (emailFunc.includes('@') == false || emailFunc.includes('.') == false) {
            msg = 'Email precisa incluir "@" e "."'
        } else if (
            forcaSenha == 'Insegura' ||
            forcaSenha == 'Fraca'
        ) {
            msg = 'A senha deve ser mais forte'
        } else if (senhaProvisoriaFunc != confirmarSenhaFunc) {
            msg = 'Senha e confirmação de senha devem ser iguais'
        } else {
            nomeFunc = nomeFunc.replace(' ', '')
            nomeCompletoFunc = nomeFunc + ' ' + 'sobrenome'
            senhaFunc = senhaProvisoriaFunc
            // cad_2.style.display = 'none';
            // cad_3.style.display = 'flex';
            cadastrar()
        }
        div_msg_erros_2.style.display = 'block'
        div_msg_erros_2.innerHTML = msg

    }

    function voltar_p1() {
        cad_1.style.display = 'flex';
        cad_2.style.display = 'none';
    }
    function voltar_p2() {
        cad_2.style.display = 'flex';
        cad_3.style.display = 'none';
    }
    function cadastrar() {
        window.location.href = './login.html'
    }

    function Validar_forca_senha() {
        var senhaProvisoriaFunc = ipt_senha.value
        if (senhaProvisoriaFunc.length > 0) {
            var criterios = -1
            var barraVetor = [
                div_barra_0,
                div_barra_1,
                div_barra_2,
                div_barra_3,
                div_barra_4,
            ]
            var caracterEspeciaisVetor = [
                '@', '#', '$',
                '%', '&', '*',
                '!', '?', '/'
            ]
            var corVetor = [
                'rgb(255, 0, 0)',
                'rgb(255, 100, 10)',
                '#e4dd0ffd',
                '#5bff03fd',
                '#033afffd',
            ]
            var fraseVetor = [
                'Insegura',
                'Fraca',
                'Média',
                'Segura',
                'Muito Segura',
            ]

            if (senhaProvisoriaFunc.length >= 6) {
                criterios++
            }
            if (senhaProvisoriaFunc.toLowerCase() != senhaProvisoriaFunc) {
                criterios++
            }
            if (senhaProvisoriaFunc.toUpperCase() != senhaProvisoriaFunc) {
                criterios++
            }
            var contNumeros = 0
            var contCaracterEspeciais = 0

            for (var cont = 0; cont <= 9; cont++) {
                if (senhaProvisoriaFunc.includes(cont)) {
                    contNumeros++
                }
                if (senhaProvisoriaFunc.includes(caracterEspeciaisVetor[cont])) {
                    contCaracterEspeciais++ // Validar isso a
                }
            }
            if (contNumeros > 0) {
                criterios++
            }
            if (contCaracterEspeciais > 0) {
                criterios++
            }

            for (var reinicar = 1; reinicar < 5; reinicar++) {
                barraVetor[reinicar].style.background = '#c4c4c4'

            }

            var i = 0

            for (; i <= criterios; i++) {
                barraVetor[i].style.background = corVetor[criterios]
            }

            console.log(i)
            span_forca_senha.style.color = corVetor[criterios]
            span_forca_senha.innerHTML = fraseVetor[i - 1]
            forcaSenha = fraseVetor[i]
        }


    }


    function formatarCnpj() {
        var cnpj = ipt_cnpj.value
        var tamanho = cnpj.length
        var cnpjFormatado = ''
        for (var i = 1; i <= tamanho; i++) {
            if (i == 3 && cnpj[i - 1] != '.') {
                cnpjFormatado += '.'
            } else if (i == 7 && cnpj[i - 1] != '.') {
                cnpjFormatado += '.'
            } else if (i == 11 && cnpj[i - 1] != '/') {
                cnpjFormatado += '/'
            } else if (i == 16 && cnpj[i - 1] != '-') {
                cnpjFormatado += '-'
            }
            cnpjFormatado += cnpj[i - 1]
        }
        ipt_cnpj.value = cnpjFormatado
    }

    function formatarTellFixo() {
        var tellFixo = ipt_telefone.value
        var tamanho = tellFixo.length
        var tellFixoFormatado = ''
        for (var i = 1; i <= tamanho; i++) {
            if (i == 1 && tellFixo[i - 1] != '(') {
                tellFixoFormatado += '('
            } else if (i == 4 && tellFixo[i - 1] != ')') {
                tellFixoFormatado += ')'
            } else if (i == 5 && tellFixo[i - 1] != ' ') {
                tellFixoFormatado += ' '
            } else if (i == 10 && tellFixo[i - 1] != '-') {
                tellFixoFormatado += '-'
            }
            tellFixoFormatado += tellFixo[i - 1]
        }
        ipt_telefone.value = tellFixoFormatado
    }

    function formatarTellCell() {
        var tellCell = ipt_telefone_2.value
        var tamanho = tellCell.length
        var tellCellFormatado = ''
        for (var i = 1; i <= tamanho; i++) {
            if (i == 1 && tellCell[i - 1] != '(') {
                tellCellFormatado += '('
            } else if (i == 4 && tellCell[i - 1] != ')') {
                tellCellFormatado += ')'
            } else if (i == 5 && tellCell[i - 1] != ' ') {
                tellCellFormatado += ' '
            } else if (i == 11 && tellCell[i - 1] != '-') {
                tellCellFormatado += '-'
            }
            tellCellFormatado += tellCell[i - 1]
        }
        ipt_telefone_2.value = tellCellFormatado
    }


    function formatarCep() {
        var cep = ipt_cep.value
        var tamanho = cep.length
        var cepFormatado = ''
        for (var i = 1; i <= tamanho; i++) {
            if (i % 6 == 0 && cep[i - 1] != '-') {
                cepFormatado += '-'
            }
            cepFormatado += cep[i - 1]
        }
        ipt_cep.value = cepFormatado
    }


</script>

</html>