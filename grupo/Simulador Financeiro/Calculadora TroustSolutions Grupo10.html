<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Simulador Financeiro</title>

    <style>
        .red {
            color: rgb(228, 37, 97);
        }

        .green {
            color: rgb(19, 182, 103);
        }

        .blue {
            color: rgb(77, 51, 244);
        }
    </style>

</head>

<body>
    <h1>Simulador Financeiro - Troust Solutions</h1>

    <span>Total de Alevinos no tanque:</span><br>
    <input type="text" id="ipt_alevinos">
    <br><br>

    <span>Custo de compra por alevinos:</span><br>
    <input type="text" id="ipt_CustoAlevinos">
    <br><br>

    <span>Custo da ração (em KG):</span><br>
    <input type="text" id="ipt_RacaoKG">
    <br><br>

    <span>Valor da venda por kg de truta:</span><br>
    <input type="text" id="ipt_VendaKG">
    <br><br>

    <span>Custo de operação:</span><br>
    <input type="text" id="ipt_CustoOperacao">
    <br><br>

    <span>Tempo de cultivo sem sensor (em meses)</span><br>
    <input type="text" id="ipt_cultivoSem">
    <br><br>

    <button onclick="calcular()">Calcular</button>

    <button onclick="limpar()">Limpar</button>


    <div id="msg"></div><br><br>

</body>

</html>

<script>
    var pesoAbate = 0.3
    var mortalidadeSem = 0.15
    var mortalidadeCom = 0.05
    var cor = ""

    function calcular() {
        var mensagem = ""
        var totalAlevino = Number(ipt_alevinos.value)
        var custoAlevino = Number(ipt_CustoAlevinos.value)
        var custoRacao = Number(ipt_RacaoKG.value)
        var vendaTrutaKG = Number(ipt_VendaKG.value)
        var custoOperacao = Number(ipt_CustoOperacao.value)
        var custoMesesSem = Number(ipt_cultivoSem.value)

        if (totalAlevino == "" || custoAlevino == "" || vendaTrutaKG == "" || custoOp == "" || custoSemMeses == "") {
            mensagem = `Preencha todos os campos para validação`
        } else if (totalAlevino < 0 || custoAlevino < 0 || vendaTrutaKG < 0 || custoOp < 0 || custoSemMeses < 0) {
            mensagem = `Os valores precisam ser positivos para validação`
        } else {

            // variaveis caso as validações sejam positivas

            var colheita = totalAlevino * (1 - mortalidadeSem)
            var pesoTotalColheita = colheita * pesoAbate
            var custoRacaoSem = pesoTotalColheita * (1.7 * custoRacao)
            var custoRacaoCom = pesoTotalColheita * (1.4 * custoRacao)
            var custoOp = custoOperacao * custoMesesSem
            var custoOpTotal = totalAlevino * custoAlevino + custoRacao + custoOp

            // calculo de rentabilidade

            var rendaTotal = pesoTotalColheita * vendaTrutaKG
            var liquido = rendaTotal - custoOpTotal

            // justificativa para ter o sensor (extra)

            var mortalidade = 0.10 * totalAlevino * pesoTotalColheita * vendaTrutaKG
            var racao = pesoAbate * pesoTotalColheita * custoRacao
            var tempo = 2 * custoOpTotal

            if(líquido < 0){
                cor = red
            } else{
                cor = green
            }

            mensagem = `<h3 style="color: blue;">Resultado simulação:<br><br>
                        <b><p>Total de Alevinos colhido: ${colheita.toFixed(2)}</p></b>
                        <b><p>Peso total de Trutas: ${pesoTotalColheita.toFixed(2)}</p></b>
                        Custo total da Operação: <span style="color: red;">${custoOpTotal.toFixed(2).toLocaleString('pt-br', { style: 'currency', currency: 'BRL' })}</span>
                        Renda total estimada: <span style="color: green;">${rendaTotal.toFixed(2).toLocaleString('pt-br', { style: 'currency', currency: 'BRL' })}</span>
                        Valor liquido estimado: ${liquido.style.color=cor.toFixed(2).toLocaleString('pt-br', { style: 'currency', currency: 'BRL' })}
                        `
        }

        msg.innerHTML = mensagem

    }

    function limpar() {

        mensagem = ""
        totalAlevino = 0
        custoAlevino = 0
        custoRacao = 0
        vendaTrutaKG = 0
        custoOperacao = 0
        custoMesesSem = 0

    }


</script>